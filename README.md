**321CD, Dan Duta**  
In implementarea router-ului, am folosit doua structuri care ma ajuta pastrez in memorie tabelele de routare si, respectiv, ARP: `struct route_cell` si `struct arp_cell`, si o structura pentru a pastra tabelele propriu-zise: `struct table`, care mentine un vector care se redimensioneaza dinamic si dimensiunea curenta si maxim a acestuia. Vectorul se aloca in functie de tipul celulei si se face cast de la `void*` la `struct route_cell*` si `struct arp_cell*` cand e nevoie.

In `table.c` am implementat functionalitea tabelelor: creare, adaugarea unei noi intrari, lookup in tabele -- ![$O(\log{}n)$](https://render.githubusercontent.com/render/math?math=%24O(%5Clog%7B%7Dn)%24) pentru tabela de routare si ![$O(n)$](https://render.githubusercontent.com/render/math?math=%24O(n)%24) pentru tabela ARP. Citirea si sortarea tabelei de routare se realizeaza in ![$O(n+n\log{}n)$](https://render.githubusercontent.com/render/math?math=%24O(n%2Bn%5Clog%7B%7Dn)%24) , deci ![$O(n\log{}n)$](https://render.githubusercontent.com/render/math?math=%24O(n%5Clog%7B%7Dn)%24). Sortez tabela pentru a putea aplica cautarea binara a prefixelor. 

Pentru implementarea propriu-zisa a procesului de dirijare si a protocoalelor ARP si ICMP, am folosit C++ (pentru `std::queue` din STL). In `router.cpp`, in bucla infinita, verific daca pachetul este destinat routerului (pentru a nu intercepta pachete trimise tot de router) si tratez cazurile in care pachetul primit este un pachet IP sau ARP. Functia `check_pkt()` verifica corectitudinea pachetului IP (checksum, TTL, prezenta in tabela de routare a nodului destinatie) si intoarce tipul de mesaj ICMP care trebuie trimis, alaturi de index-ul din pozitia de routare a next_hop-ului. Pachetul este adaugat in coada daca nu se gaseste intrare in tabela ARP si se trimite ARP request folosind `create_arp_packet()`, forwarded sau `create_icmp_packet()`  modifica un pachet ICMP pentru a-l trimite la sursa pachetului original, in caz de ICMP echo request sau eroare. In cazul in care pachetul este de tip ARP, trimite ARP reply cand primeste ARP request sau adauga in tabela ARP o noua intrare cu sursa pachetului si proceseaza coada pentru a trimite pachetele ale caror destinatie fizica era necunoscuta pana acum.
